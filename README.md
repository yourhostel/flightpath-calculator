# Завдання для java інженера з управління трафіком
#### flightpath-calculator



```bash
docker run --name flightpath-mongo -p 27017:27017 -d mongo:latest
```

# Розрахунок Маршруту літальних апаратів (ЛА)

Сервіс [PlaneCalculationService](https://github.com/yourhostel/flightpath-calculator/blob/main/src/main/java/com/aerocontrol/flightpath/service/PlaneCalculationService.java) призначений для розрахунку маршрутів ЛА з урахуванням різних льотних характеристик і контрольних точок. Використовуючи серію географічних точок, сервіс розраховує деталізований маршрут ЛА.

## Характеристики ЛА

ЛА описується наступними характеристиками:
- Максимальна швидкість (може бути використана)
- Максимальне прискорення (використовується) 
- Швидкість зміни висоти (не використовується в даному прикладі)
- Швидкість зміни курсу (не використовується в даному прикладі)

## Контрольні Точки Маршруту

Маршрут складається з п'яти сегментів між контрольними точками:
1. Від (0, 0, 0, 0) до (0.01, 0.01, 100, 80)
2. Від (0.01, 0.01, 100, 80) до (0.04, -0.02, 80, 150)
3. Від (0.04, -0.02, 80, 150) до (0.07, 0.03, 70, 160)
4. Від (0.07, 0.03, 70, 160) до (0.09, -0.04, 90, 50)
5. Від (0.09, -0.04, 90, 50) до (0.1, 0, 0, 0)

[WayPoint](https://github.com/yourhostel/flightpath-calculator/blob/main/src/main/java/com/aerocontrol/flightpath/domain/WayPoint.java) :
```java
public record WayPoint(
        double latitude, // Широта
        double longitude, // Довгота
         double altitude, // Висота прольоту м
        double speed // Швидкість прольоту м/с
) { }
```

## Формули для Розрахунку

Для визначення відстані між двома точками на поверхні Землі використовується формула гаверсинусів:

$$
d = R \cdot \arccos\left(\sin(\phi_1) \cdot \sin(\phi_2) + \cos(\phi_1) \cdot \cos(\phi_2) \cdot \cos(\lambda_2 - \lambda_1)\right)
$$

де:
- \( d \) — відстань між точками (у метрах),
- \( R \) — радіус Землі (приблизно 6371 км),
- \( \phi_1, \lambda_1 \) — широта і довгота першої точки в радіанах,
- \( \phi_2, \lambda_2 \) — широта і довгота другої точки в радіанах.

Курс між точками визначається як:

$$
\text{курс} = \text{atan2}\left(\sin(\Delta\lambda) \cdot \cos(\phi_2), \cos(\phi_1) \cdot \sin(\phi_2) - \sin(\phi_1) \cdot \cos(\phi_2) \cdot \cos(\Delta\lambda)\right)
$$

де $\( \Delta\lambda \)$ - різниця довгот точок.

Інтерполяція широти та довготи між двома точками виконується за формулами лінійної інтерполяції:

$$
\text{інтерпольована широта} = \phi_1 + (\phi_2 - \phi_1) \cdot \frac{\text{поточна позиція}}{\text{загальна відстань}}
$$

$$
\text{інтерпольована довгота} = \lambda_1 + (\lambda_2 - \lambda_1) \cdot \frac{\text{поточна позиція}}{\text{загальна відстань}}
$$

Результати розрахунку демонструються на наданих графіках швидкості та висоти літака в часі, а також траекторії польоту.

![2024-04-08_205839.jpg](screenshots%2F2024-04-08_205839.jpg)
![2024-04-08_205954.jpg](screenshots%2F2024-04-08_205954.jpg)
![2024-04-08_210051.jpg](screenshots%2F2024-04-08_210051.jpg)